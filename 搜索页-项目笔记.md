# 搜索页-项目笔记

## 分类导航传值
1. 通过给1级、2级、3级设置为`router-link`跳转
   `<router-link :to="{ path: '/search' }">手机</router-link>`
   缺点: 组件使用太多 消耗性能

2. 通过给1级、2级、3级设置点击事件 通过编程式导航 跳转
   `@click`
   缺点： 绑定太多事件，浪费资源

3. 通过给事件委托给父元素绑定事件 解决事件绑定
``` vue
<template>
<div
  class="item"
  :class="{ active: activeId === cate1.categoryId}"
  v-for="cate1 in navList"
  :key="cate1.categoryId"
  @mouseenter="addActive(cate1.categoryId)"
  @click="goSearch"
>
    <h3>
        <!-- 一级分类 -->
        <a :data-category-name="cate1.categoryName" :data-category1-id="cate1.categoryId">{{cate1.categoryName}}</a>
    </h3>
    <div class="item-list clearfix">
        <div class="subitem">
            <dl class="fore" v-for="cate2 in cate1.categoryChild" :key="cate2.categoryId">
                <dt>
                    <!-- 二级分类 -->
                    <a :data-category-name="cate2.categoryName" :data-category2-id="cate2.categoryId">{{cate2.categoryName}}</a>
                </dt>
                <dd>
                    <em v-for="cate3 in cate2.categoryChild" :key="cate3.categoryId">
                        <!-- 三级分类 -->
                        <a :data-category-name="cate3.categoryName" :data-category3-id="cate3.categoryId">{{cate3.categoryName}}</a>
                    </em>
                </dd>
            </dl>
        </div>
    </div>
</div>
</template>

<script>
export default {
  methods: {
    // 跳转搜索页面
    goSearch (e) {
      // 识别当前点击的元素为 1级、2级、3级  category1Id  category2Id
      // 通过给1级、2级、3级分类添加属性 来区别当前元素是否为1级、2级、3级
      // 使用JS获取元素中的data-属性
      const { categoryName, category1Id, category2Id, category3Id } = e.target.dataset
      // 如果没有categoryName值 说明不能1级、2级、3级分类
      if (!categoryName) return
      // undefined值不会通过URL传递
      this.$router.push({ path: '/search/', query: { categoryName, category1Id, category2Id, category3Id } })
    }
  }
}
</script>
```

